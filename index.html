
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Robinson Integration Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/white.png" class="logo" style="margin: 20px auto; margin-bottom: 10px;" alt="White" />
      <p style="color: white; margin: 0 auto; text-align: center; margin-bottom: 20px;">Robinson Integration</p>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="authentication">Authentication</a>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="webhooks">Webhooks</a>
          </li>
          <li>
            <a href="#robinson-orders" class="toc-h1 toc-link" data-title="robinson-orders">Robinson Orders</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-robinson-orders" class="toc-h2 toc-link" data-title="get-all-robinson-orders">Get All Robinson Orders</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-order" class="toc-h2 toc-link" data-title="get-a-specific-order">Get a Specific Order</a>
                  </li>
                  <li>
                    <a href="#create-a-new-order" class="toc-h2 toc-link" data-title="create-a-new-order">Create a New Order</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#order-status-codes" class="toc-h1 toc-link" data-title="order-status-codes">Order Status Codes</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="errors">Errors</a>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Hello Snap and Robinson team.  The goal of this document is for us to come together
on a basic systems architecture so that we can get the ball rolling on an integration
between Snap and Robinson.</p>

<p>This document is to try and help communicate the basic ideas.  Please consider this a
first draft where everything is up for discussion.  The end goal behind this document
is to set some expectations so that both Snap and Robinson can work in parallel without
either one needing a system to be completed, and to minimize the integration overhead
once we&#39;re ready to try this out.</p>

<p>The ideal end goal of this process will be a working Minimum Viable Product (MVP).
We don&#39;t expect this document to cover everything we&#39;ll ever need into the future.<br>
We expect that this integration and document will change over time.  What we are aiming
for is an integration that is as simple as possible for both sides to build out while
also still meeting our basic integration needs at our current volume.  </p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: snap_robinson_token"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>snap_robinson_token</code> with your API key.</p>
</blockquote>

<p>API key generation/management is up for discussion.  For an MVP, Snap would be fine with
a very basic static &quot;secret&quot; API key with the understanding of changing this over time.</p>

<p>Snap&#39;s API integration will pass an API key to all requests in a header that looks like this:</p>

<p><code>Authorization: snap_robinson_token</code></p>

<aside class="notice">
Snap must replace <code>snap_robinson_token</code> with the agreed upon API key.
</aside>
<h1 id='webhooks'>Webhooks</h1>
<p>To try and prevent high volume polling, Robinson&#39;s system should allow for basic webhook-based
events.  </p>

<p>Snap will provide a URL that Robinson will send a POST request to.  This POST could either be a
basic event that Snap would parse to determine what type of request must be made; or it could just be
the body of the &quot;Get a Specific Order&quot; request itself for now. The former is a more extensible
option that we would eventually need to move towards, while the latter is likely easier to
implement and saves an extra web request.</p>

<p>Like the API key, this URL could be explicitly provided and not dynamically managed.</p>
<h1 id='robinson-orders'>Robinson Orders</h1><h2 id='get-all-robinson-orders'>Get All Robinson Orders</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/orders"</span>
  -H <span class="s2">"Authorization: snap_robinson_token"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"snap_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipped"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipped_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipping_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPS1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">123456790</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all orders.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET http://example.com/api/orders</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>last_updated_at</td>
<td>false</td>
<td>Requires UNIX Timestamp.  If provided, limits results to orders that have been updated between last_updated_at and current time.</td>
</tr>
<tr>
<td>page</td>
<td>0</td>
<td>Used for results pagination; all requests start on page 0 by default</td>
</tr>
</tbody></table>
<h3 id='response-body'>Response Body</h3>
<p>The response body will be an array of objects.  Each object will be of the same format
outlined in the &quot;Get a Specific Order&quot; response body section below.</p>
<h2 id='get-a-specific-order'>Get a Specific Order</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/orders/2"</span>
  -H <span class="s2">"Authorization: snap_robinson_token"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"snap_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipped"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipped_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPS1234567890"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error_info"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves a specific order.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET http://example.com/orders/kittens/&lt;ID&gt;</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the order to retrieve</td>
</tr>
</tbody></table>
<h3 id='response-body-2'>Response Body</h3>
<p>In this JSON response, if any of these fields are empty or <code>null</code>, they can optionally
simply not be sent along in the response body.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the order that was retrieved</td>
</tr>
<tr>
<td>Snap ID</td>
<td>The Snap ID that was communicated when the order was created</td>
</tr>
<tr>
<td>Status</td>
<td>Order Status Code; see &quot;Order Status Code&quot; section for more info.</td>
</tr>
<tr>
<td>Shipped At</td>
<td>UNIX Timestamp associated with the time an order was shipped.</td>
</tr>
<tr>
<td>Shipping Code</td>
<td>Parcel Tracking ID for the shipping service used.</td>
</tr>
<tr>
<td>Error Info</td>
<td>If Status is &quot;error&quot;, this string shows a brief explanation or error code.</td>
</tr>
<tr>
<td>Updated At</td>
<td>UNIX Timestamp associated with the time this order was last updated in any way.</td>
</tr>
</tbody></table>
<h2 id='create-a-new-order'>Create a New Order</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/kittens"</span>
  -X POST
  -H <span class="s2">"Authorization: snap_robinson_token"</span>
  -d <span class="s1">'{
    "snap_id": 2,
    "shipping_address": {
      "name": "Snap Raise",
      "street1": "939 Westlake Ave N",
      "street2": "",
      "city": "Seattle",
      "state": "WA",
      "zip": "98109",
      "country": "USA"
    },
    "line_items": [
      {
        "snap_item_id": 12345,
        "snap_sku": "SNAP12345",
        "size": "M",
        "quantity": 2,
        "logo_url": "http://the.image.url/picture.svg"
      },
      {
        "snap_item_id": 54321,
        "snap_sku": "SNAP54321",
        "size": "M",
        "quantity": 2,
        "logo_url": "http://the.image.url/picture.svg"
      }
    ]
  }'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"snap_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234567890</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a new order, adding it to Robinson&#39;s fulfillment process.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST http://example.com/api/orders</code></p>
<h4 id='post-body'>POST Body</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Req?</th>
<th>Dflt</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Snap ID</td>
<td></td>
<td></td>
<td>Snap&#39;s internal ID for this order.</td>
</tr>
<tr>
<td>Shipping Address</td>
<td>Y</td>
<td></td>
<td>The shipping address for this order; JSON object</td>
</tr>
<tr>
<td><span style='float:right'><em>Name</em></span></td>
<td>Y</td>
<td></td>
<td>Recipient full name</td>
</tr>
<tr>
<td><span style='float:right'><em>Street1</em></span></td>
<td>Y</td>
<td></td>
<td>Recipient street address line 1</td>
</tr>
<tr>
<td><span style='float:right'><em>Street2</em></span></td>
<td>Y</td>
<td></td>
<td>Recipient street address line 2</td>
</tr>
<tr>
<td><span style='float:right'><em>City</em></span></td>
<td>Y</td>
<td></td>
<td>Recipient city</td>
</tr>
<tr>
<td><span style='float:right'><em>State</em></span></td>
<td>Y</td>
<td></td>
<td>Recipient state ( <a href="https://en.wikipedia.org/wiki/List_of_U.S._state_abbreviations#Postal_codes">USPS Standard 2-letter Abbreviation</a> )</td>
</tr>
<tr>
<td><span style='float:right'><em>Zip</em></span></td>
<td>Y</td>
<td></td>
<td>Recipient zip code</td>
</tr>
<tr>
<td><span style='float:right'><em>Country</em></span></td>
<td>N</td>
<td>&#39;USA&#39;</td>
<td>Recipient country</td>
</tr>
<tr>
<td>Line Items</td>
<td>Y</td>
<td></td>
<td>Line items in the order; Array of JSON Objects</td>
</tr>
<tr>
<td><span style='float:right'><em>Snap Item ID</em></span></td>
<td>Y</td>
<td></td>
<td>Snap&#39;s internal ID for this product</td>
</tr>
<tr>
<td><span style='float:right'><em>Snap SKU</em></span></td>
<td>Y</td>
<td></td>
<td>Snap&#39;s SKU for this product</td>
</tr>
<tr>
<td><span style='float:right'><em>Size</em></span></td>
<td>Y</td>
<td></td>
<td>Size of the product ordered</td>
</tr>
<tr>
<td><span style='float:right'><em>Quantity</em></span></td>
<td>Y</td>
<td></td>
<td>Number of products</td>
</tr>
<tr>
<td><span style='float:right'><em>Logo URL</em></span></td>
<td>Y</td>
<td></td>
<td>URL to the logo design file</td>
</tr>
</tbody></table>
<h3 id='response-body-3'>Response Body</h3>
<p>The response body of this request will be of the same format outlined in the &quot;Get a Specific Order&quot; response body section below.</p>
<h1 id='order-status-codes'>Order Status Codes</h1>
<p>The following order status codes are expected:</p>

<table><thead>
<tr>
<th>Status Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>new</td>
<td>This is a newly created order record.</td>
</tr>
<tr>
<td>processing</td>
<td>This order is being processed.</td>
</tr>
<tr>
<td>shipped</td>
<td>This order has been shipped.</td>
</tr>
<tr>
<td>delivered</td>
<td>This order has been verified delivered.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>The following error codes will be associated with the :</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- The request made is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- The API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The resource requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified resource could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a resource with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The order requested has been removed from our servers.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Rate of requests is too high.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
